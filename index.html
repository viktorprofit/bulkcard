<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Real Bulkoor — Passport Card</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#0E0D0A; --bg2:#1B1A14;
    --ink:#141311; --ink2:#1F1E19;
    --text:#EDECE3; --muted:#C6B6BA;
    --foil1:#5A2C40; --foil2:#C6B6BA; --foil3:#F9F8ED;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui;
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    color:var(--text);
  }
  .wrap{max-width:1200px;margin:0 auto;padding:28px;display:grid;gap:22px}
  .grid{display:grid;grid-template-columns:1fr 760px;gap:22px}
  @media(max-width:1000px){.grid{grid-template-columns:1fr}}
  .panel{background:rgba(22,21,19,.6);border:1px solid rgba(237,236,227,.08);border-radius:16px;padding:16px;backdrop-filter:blur(6px)}
  .label{display:block;font-size:12px;color:var(--muted);margin:8px 0 4px}
  .input,.select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(237,236,227,.15);background:#0f0e0b;color:var(--text)}
  .btn{margin-top:10px;padding:10px 16px;border:none;border-radius:8px;cursor:pointer;background:linear-gradient(135deg,#2a1e24,#2f1f27);color:#fff}
  canvas{width:100%;height:auto;border-radius:28px;display:block}
</style>
</head>
<body>
<div class="wrap">
  <div class="grid">
    <div class="panel">
      <label class="label">Name</label>
      <input id="name" class="input" value="Real Bulkoor"/>
      <label class="label">Discord</label>
      <input id="discord" class="input" placeholder="@yourhandle"/>
      <label class="label">Bullish level</label>
      <select id="level" class="select">
        <option>Not bullish</option><option>Mild</option><option selected>Bullish</option><option>Very bullish</option><option>Max bullish</option>
      </select>
      <label class="label">Photo</label>
      <input id="photo" type="file" accept="image/*" class="input"/>
      <button id="downloadBtn" class="btn">Download PNG</button>
    </div>
    <canvas id="c" width="960" height="600"></canvas>
  </div>
</div>

<script>
const c=document.getElementById('c'),ctx=c.getContext('2d');
const n=document.getElementById('name'),d=document.getElementById('discord'),l=document.getElementById('level'),p=document.getElementById('photo');
let imgData=""; let memberId='BLK-000001';

function rr(x,y,w,h,r){ctx.beginPath();ctx.moveTo(x+r,y);ctx.arcTo(x+w,y,x+w,y+h,r);ctx.arcTo(x+w,y+h,x,y+h,r);ctx.arcTo(x,y+h,x,y,r);ctx.arcTo(x,y,x+w,y,r);ctx.closePath();}
function gradient(){const g=ctx.createLinearGradient(0,0,c.width,c.height);g.addColorStop(0,getVar('--foil1'));g.addColorStop(.5,getVar('--foil2'));g.addColorStop(1,getVar('--foil3'));return g;}
function getVar(v){return getComputedStyle(document.documentElement).getPropertyValue(v).trim();}
function loadImage(src){return new Promise(r=>{const i=new Image();i.onload=()=>r(i);i.src=src;});}
function divider(x1,x2,y){ctx.strokeStyle='rgba(237,236,227,.15)';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(x1,y+.5);ctx.lineTo(x2,y+.5);ctx.stroke();}

async function drawCard(){
  ctx.clearRect(0,0,c.width,c.height);
  const W=c.width,H=c.height,P=40;
  ctx.fillStyle=gradient();rr(0,0,W,H,28);ctx.fill();
  ctx.save();ctx.translate(10,10);
  const innerW=W-20,innerH=H-20;
  const bg=ctx.createLinearGradient(0,0,0,innerH);bg.addColorStop(0,getVar('--ink'));bg.addColorStop(1,getVar('--ink2'));
  ctx.fillStyle=bg;rr(0,0,innerW,innerH,22);ctx.fill();

  ctx.fillStyle=getVar('--text');ctx.font='700 36px Fraunces';ctx.fillText('Bulk Identity',P,80);
  // photo box
  const photoSize=180,photoX=P,photoY=120;
  ctx.strokeStyle='rgba(237,236,227,.2)';rr(photoX-5,photoY-5,photoSize+10,photoSize+10,14);ctx.stroke();
  if(imgData){const img=await loadImage(imgData);ctx.save();rr(photoX,photoY,photoSize,photoSize,10);ctx.clip();ctx.drawImage(img,photoX,photoY,photoSize,photoSize);ctx.restore();}

  // right col, improved spacing
  const rx=P+photoSize+50;let y=120;const lineX2=innerW-P;
  const label=(t)=>{ctx.fillStyle=getVar('--muted');ctx.font='600 15px Inter';ctx.fillText(t,rx,y);y+=18;};
  const value=(t,large)=>{ctx.fillStyle=getVar('--text');ctx.font=large?'700 26px Inter':'700 20px Inter';ctx.fillText(t,rx,y);y+=large?34:26;divider(rx,lineX2,y+6);y+=20;};

  label('Name');value(n.value||'Real Bulkoor',true);
  label('Discord');value((d.value? (d.value.startsWith('@')?d.value:'@'+d.value) :'@handle'),true);
  label('Bullish');value(l.value,true);
  label('Member ID');value(memberId,true);
  label('Valid Thru');value('∞',true);

  // footer
  ctx.fillStyle=getVar('--muted');ctx.font='400 15px Inter';ctx.fillText('Issued by Bulk Identity Authority · Non-transferable · For community use',P,H-40);
  ctx.restore();
}

n.oninput=d.oninput=l.onchange=drawCard;
p.onchange=e=>{const f=e.target.files?.[0];if(!f)return;const r=new FileReader();r.onload=()=>{imgData=r.result;drawCard();};r.readAsDataURL(f);};
document.getElementById('downloadBtn').onclick=()=>{const a=document.createElement('a');a.download='bulkoor_card.png';a.href=c.toDataURL('image/png');a.click();};
drawCard();
</script>
</body>
</html>
